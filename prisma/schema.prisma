generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
  // shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model User {
  id            BigInt @id @default(autoincrement())
  name          String
  email         String @unique
  password      String
  eth_balance   String
  usd_balance   String
  kanch_balance String

  buyOrders  OrderBook[] @relation("BuyerOrders")
  sellOrders OrderBook[] @relation("SellerOrders")

  createdAt DateTime  @default(now()) @db.Timestamp(6)
  updatedAt DateTime? @updatedAt @db.Timestamp(6)
  deletedAt DateTime? @db.Timestamp(6)

  @@index([email], name: "idx_users_email")
  @@map("users")
}

model OrderBook {
  id       BigInt @id @default(autoincrement())
  buyer    User   @relation("BuyerOrders", fields: [buyer_id], references: [id])
  buyer_id BigInt

  seller    User   @relation("SellerOrders", fields: [seller_id], references: [id])
  seller_id BigInt

  currency       String
  quantity       String
  price          String
  status         String
  order_catagory String
  order_type     String

  createdAt DateTime  @default(now()) @db.Timestamp(6)
  updatedAt DateTime? @updatedAt @db.Timestamp(6)
  deletedAt DateTime? @db.Timestamp(6)

  @@map("orderBooks")
}
